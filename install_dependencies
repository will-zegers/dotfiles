#! /usr/bin/env bash

set -ex

sudo apt update -y
sudo apt install -y\
  curl\
  exuberant-ctags\
  git\
  luarocks\
  ripgrep\
  tmux\
  tree\
  vim\
  wget\
  zsh

### Grab the latest stable release of Neovim ###
arch=$(uname -m)
if [[ "$arch" == "x86_64" ]]; then
    PKG_NAME="nvim-linux-x86_64"
elif [[ "$arch" == "aarch64" ]]; then
    PKG_NAME="nvim-linux-arm64"
fi
wget https://github.com/neovim/neovim/releases/latest/download/$PKG_NAME.tar.gz -P /tmp
tar xzf /tmp/$PKG_NAME.tar.gz -C /tmp
sudo mv /tmp/$PKG_NAME /usr/local/nvim

sudo ln -s /usr/local/nvim/bin/nvim /etc/alternatives/nvim
sudo ln -sf /etc/alternatives/nvim /usr/bin/vi
sudo ln -sf /etc/alternatives/nvim /usr/bin/vim
###

sudo apt -y autoremove

touch /tmp/install_dependencies.stamp
